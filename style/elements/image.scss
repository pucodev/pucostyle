.avatar,
.image {
  $image-dimensions: 16, 24, 32, 48, 64, 96, 128;
  overflow: hidden;
  position: relative;

  @each $dimension in $image-dimensions {
    &.is-size-#{$dimension} {
      width: #{$dimension}px;
      height: #{$dimension}px;
    }
  }

  img,
  .img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    position: relative;
    z-index: 1;
  }

  &.is-rounded {
    border-radius: 9999px;
  }

  .fallback {
    z-index: 0;
    position: absolute;
    top: 0px;
    bottom: 0px;
    right: 0px;
    left: 0px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: hsl(var(--ps-ui-color-muted));
  }

  $image-responsive: (1 1), (5 4), (4 3), (3 2), (5 3), (16 9), (2 1), (3 1),
    (4 5), (3 4), (2 3), (3 5), (9 16), (1 2), (1 3);

  @each $ratio in $image-responsive {
    &.is-#{nth($ratio, 1)}by#{nth($ratio, 2)} {
      padding-top: #{nth($ratio, 2) / nth($ratio, 1) * 100%};
    }
  }

  $classes: ();

  @each $ratio in $image-responsive {
    $classes: append(
      $classes,
      unquote("&.is-#{nth($ratio, 1)}by#{nth($ratio, 2)}"),
      comma
    );
  }

  #{$classes} {
    .img,
    img {
      bottom: 0;
      left: 0;
      position: absolute;
      right: 0;
      top: 0;
    }
  }
}
